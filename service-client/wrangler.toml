name = "webkit-client"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Main entry point (SvelteKit builds to this)
main = ".svelte-kit/cloudflare/_worker.js"

# Static assets directory
[site]
bucket = ".svelte-kit/cloudflare"

# Environment variables (set via wrangler or Cloudflare dashboard)
[vars]
# These will be overridden by secrets/vars in deployment
# CORE_URL = "https://api.webkit.au"

# Production environment
[env.production]
name = "webkit-client"
routes = [
  { pattern = "app.webkit.au", custom_domain = true }
]

# Staging/Preview environment (PR previews will override the name)
[env.staging]
name = "webkit-client-staging"

# Build settings
[build]
command = "npm run build"

# Node.js compatibility for SvelteKit
[build.upload]
format = "modules"
